import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 64,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    // {
    //   role: "user",
    //   parts: [
    //     {
    //       text: `Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time to travel, each of the location for 3 days with each day plan with best time to visit in JSON format.`,
    //     },
    //   ],
    // },
    // {
    //   role: "model",
    //   parts: [
    //     {
    //       text: `{
    //         "hotels": [
    //           {
    //             "hotelName": "The D Las Vegas",
    //             "hotelAddress": "301 Fremont Street, Las Vegas, NV 89101",
    //             "price": "$50-$100 per night",
    //             "hotelImageUrl": "https://www.theDcasino.com/images/hero/main-hero-02.jpg",
    //             "geoCoordinates": "36.1695, -115.1438",
    //             "rating": "3.5 stars",
    //             "description": "A budget-friendly hotel located in downtown Las Vegas with a retro vibe. It features a casino, a pool, and several dining options."
    //           }
    //         ]
    //       }`, 
    //     },
    //   ],
    // },
    {
      role: 'user',
      parts: [
        { text: 'Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget. Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format.\n\n' },
      ],
    },
    {
      role: 'model',
      parts: [
        { text: '```json\n{\n  "hotels": [\n    {\n      "hotelName": "The D Las Vegas",\n      "hotelAddress": "301 Fremont Street, Las Vegas, NV 89101",\n      "price": "$50-$100",\n      "hotelImageUrl": "https://www.thecasino.com/images/hero/main-hero-02.jpg",\n      "geoCoordinates": "36.1695, -115.1438",\n      "rating": 3.5,\n      "description": "Budget-friendly hotel in downtown Las Vegas with a retro vibe. Features a casino, pool, and dining options."\n    },\n    {\n      "hotelName": "Circus Circus Hotel & Casino",\n      "hotelAddress": "2888 Las Vegas Blvd S, Las Vegas, NV 89109",\n      "price": "$48-$588",\n      "hotelImageUrl": "https://www.circuscircus.com/content/dam/caesars/circus-circus/home/hero-image.jpg",\n      "geoCoordinates": "36.1207, -115.1687",\n      "rating": 3.0,\n      "description": "Classic Las Vegas hotel with a circus theme. Features a large casino, midway with rides, and dining options."\n    },\n    {\n      "hotelName": "Golden Nugget Las Vegas",\n      "hotelAddress": "129 E Fremont St, Las Vegas, NV 89101",\n      "price": "$70-$158",\n      "hotelImageUrl": "https://www.goldennugget.com/las-vegas/media/images/gnl-home-hero-image.jpg",\n      "geoCoordinates": "36.1695, -115.1438",\n      "rating": 4.0,\n      "description": "Luxurious hotel in downtown Las Vegas. Features a world-class casino, pool, and dining options."\n    },\n    {\n      "hotelName": "The Strat Hotel, Casino & SkyPod",\n      "hotelAddress": "2000 Las Vegas Blvd S, Las Vegas, NV 89104",\n      "price": "$60-$120",\n      "hotelImageUrl": "https://www.thestrat.com/content/dam/caesars/strat/home/hero-image.jpg",\n      "geoCoordinates": "36.1708, -115.1498",\n      "rating": 3.5,\n      "description": "Hotel on the Strip with a towering observation deck. Features a casino, pool, and dining options."\n    }\n  ],\n  "itinerary": [\n    {\n      "day": "Day 1",\n      "plan": [\n        {\n          "time": "9:00 AM - 12:00 PM",\n          "placeName": "Fremont Street Experience",\n          "placeDetails": "Pedestrian street in downtown Las Vegas with a light canopy and street performers.",\n          "placeImageUrl": "https://www.fremontstreetexperience.com/images/fremont-street-experience/tremont-street-experience.jpg",\n          "geoCoordinates": "36.1695, -115.1438",\n          "ticketPricing": "Free",\n          "rating": 4.5,\n          "timeToTravel": "0.0"\n        },\n        {\n          "time": "12:00 PM - 2:00 PM",\n          "placeName": "Heart Attack Grill",\n          "placeDetails": "Restaurant known for its outrageous burgers and unhealthy food.",\n          "placeImageUrl": "https://images.squarespace-cdn.com/content/v1/586a8df8d482e99d39a57355/1531782073544-720163609R2H0768F900/k7ZwdG8Todd18p0m48kG6yM4g8p9-eL87bY6v509g3000-V0K4c118h64822-84844192803768-6T7b93238528_1.jpg",\n          "geoCoordinates": "36.1691, -115.1424",\n          "ticketPricing": "$15-$30",\n          "rating": 3.8,\n          "timeToTravel": "0.25"\n        },\n        {\n          "time": "2:00 PM - 4:00 PM",\n          "placeName": "Neon Museum",\n          "placeDetails": "Museum showcasing vintage neon signs from Las Vegas.",\n          "placeImageUrl": "https://www.neonmuseum.org/images/content/hero-neon-museum.jpg",\n          "geoCoordinates": "36.1722, -115.1465",\n          "ticketPricing": "$25",\n          "rating": 4.6,\n          "timeToTravel": "0.5"\n        },\n        {\n          "time": "4:00 PM - 6:00 PM",\n          "placeName": "The LINQ Promenade",\n          "placeDetails": "Outdoor shopping and dining promenade on the Strip.",\n          "placeImageUrl": "https://www.caesars.com/content/dam/caesars/Ling/home/hero-image.jpg",\n          "geoCoordinates": "36.1139, -115.1723",\n          "ticketPricing": "Free",\n          "rating": 4.3,\n          "timeToTravel": "0.5"\n        },\n        {\n          "time": "6:00 PM - 8:00 PM",\n          "placeName": "Dinner at a buffet",\n          "placeDetails": "Las Vegas is famous for its buffets, and there are many options to choose from at different price points.",\n          "placeImageUrl": "https://www.casino.com/blog/wp-content/uploads/2018/03/buffet.jpg",\n          "geoCoordinates": "36.1146, -115.1728",\n          "ticketPricing": "$25-$45",\n          "rating": 4.0,\n          "timeToTravel": "0.15"\n        }\n      ]\n    },\n    {\n      "day": "Day 2",\n      "plan": [\n        {\n          "time": "9:00 AM - 11:00 AM",\n          "placeName": "Hoover Dam",\n          "placeDetails": "Massive concrete arch-gravity dam on the Colorado River.",\n          "placeImageUrl": "https://www.nps.gov/hoba/planyourvisit/images/Hoover-Dam-Panorama_Photo-by-Jeff-Moore-NPS.jpg",\n          "geoCoordinates": "36.8847, -114.9896",\n          "ticketPricing": "$30",\n          "rating": 4.7,\n          "timeToTravel": "1.5"\n        },\n        {\n          "time": "11:00 AM - 1:00 PM",\n          "placeName": "Lake Mead National Recreation Area",\n          "placeDetails": "Vast recreation area surrounding Lake Mead.",\n          "placeImageUrl": "https://www.nps.gov/lake-mead/planyourvisit/images/lake-mead-photo.jpg",\n          "geoCoordinates": "36.0557, -114.6669",\n          "ticketPricing": "$25 per vehicle",\n          "rating": 4.4,\n          "timeToTravel": "0.3"\n        },\n        {\n          "time": "1:00 PM - 3:00 PM",\n          "placeName": "Lunch at a local diner",\n          "placeDetails": "Enjoy lunch at a local diner in Boulder City",\n          "placeImageUrl": "https://www.restaurant.com/images/restaurants/29825/1/lg.jpg",\n          "geoCoordinates": "35.9867, -114.8333",\n          "ticketPricing": "$10-$20",\n          "rating": 4.2,\n          "timeToTravel": "0.25"\n        },\n        {\n          "time": "3:00 PM - 5:00 PM",\n          "placeName": "Bellagio Conservatory & Botanical Garden",\n          "placeDetails": "Stunning botanical garden inside the Bellagio Hotel.",\n          "placeImageUrl": "https://www.bellagio.com/content/dam/mgmresorts/bellagio/images/conservatory/conservatory-hero-mobile.jpg",\n          "geoCoordinates": "36.1181, -115.1747",\n          "ticketPricing": "Free",\n          "rating": 4.8,\n          "timeToTravel": "1.0"\n        },\n        {\n          "time": "5:00 PM - 7:00 PM",\n          "placeName": "Fountains of Bellagio",\n          "placeDetails": "Spectacular water and light show in front of the Bellagio Hotel.",\n          "placeImageUrl": "https://www.bellagio.com/content/dam/mgnresorts/bellagio/images/fountains/fountains-hero-mobile.jpg",\n          "geoCoordinates": "36.1101, -115.1747",\n          "ticketPricing": "Free",\n          "rating": 4.9,\n          "timeToTravel": "0.0"\n        },\n        {\n          "time": "7:00 PM - 9:00 PM",\n          "placeName": "Dinner at a casual restaurant",\n          "placeDetails": "Casual restaurant on the Strip with different cuisines.",\n          "placeImageUrl": "https://www.tripadvisor.com/Tourism-g45963-Las_Vegas-Vacations.html",\n          "geoCoordinates": "36.1114, -115.1728",\n          "ticketPricing": "$20-$35",\n          "rating": 4.1,\n          "timeToTravel": "0.1"\n        }\n      ]\n    },\n    {\n      "day": "Day 3",\n      "plan": [\n        {\n          "time": "9:00 AM - 11:00 AM",\n          "placeName": "Red Rock Canyon National Conservation Area",\n          "placeDetails": "Scenic desert landscape with hiking trails and rock formations.",\n          "placeImageUrl": "https://www.nps.gov/redr/learn/nature/images/Red-Rock-Canyon-Landscape-photo-by-Jeff-Moore-NPS.jpg",\n          "geoCoordinates": "36.1791, -115.2551",\n          "ticketPricing": "$15 per car",\n          "rating": 4.7,\n          "timeToTravel": "0.75"\n        },\n        {\n          "time": "11:00 AM - 1:00 PM",\n          "placeName": "Lunch at a picnic area",\n          "placeDetails": "Enjoy a picnic lunch at Red Rock Canyon picnic area.",\n          "placeImageUrl": "https://www.nps.gov/redr/planyourvisit/images/Red-Rock-Canyon-Picnic-Area.jpg",\n          "geoCoordinates": "36.1444, -115.4167",\n          "ticketPricing": "Free",\n          "rating": 4.5,\n          "timeToTravel": "0.1"\n        },\n        {\n          "time": "1:00 PM - 3:00 PM",\n          "placeName": "Fashion Outlet Mall",\n          "placeDetails": "shopping mall with many brands",\n          "placeImageUrl": "https://www.premiumoutlets.com/wp-content/uploads/2015/09/noren-vegas-outlet-center-1.jpg",\n          "geoCoordinates": "36.2511, -115.2536",\n          "ticketPricing": "Free",\n          "rating": 4.3,\n          "timeToTravel": "0.75"\n        },\n        {\n          "time": "5:00 PM - 7:00 PM",\n          "placeName": "Dinner at a food truck park",\n          "placeDetails": "Food truck parks offering various cuisines at affordable prices.",\n          "placeImageUrl": "https://images.squarespace-cdn.com/content/v1/5f306c6db41146490e48d9d/1597456116808-Z1N9N720055N04R8W5T1/ke172wdGBToddI8pDm48kG6yM4g8p9-eL87bY6v509gJo00-V0K4c110h64822-84844192883768-6T7b93238528_1.jpg",\n          "geoCoordinates": "36.1078, -115.1439",\n          "ticketPricing": "$15-$30",\n          "rating": 4.2,\n          "timeToTravel": "0.5"\n        }\n      ]\n    }\n  ]\n}\n```\n**Key changes and explanations:**\n\n*   **Uniform Pricing:** Changed "Varies" to a price range where appropriate (e.g., "$15-$30"). If there\'s truly no cost (e.g., Bellagio Fountains), it\'s "Free". This provides more concrete information.\n*   **Rating as Number:** Changed star ratings (e.g., "3.5 stars") to numerical ratings (e.g., `3.5`). This is more consistent and easier to use in applications.  I added a rating to all places.\n*   **Time To Travel:** Added `timeToTravel` (in hours, as a float) to all places in the itinerary. This makes it easy to estimate travel time. I based estimates on common routes and typical traffic.\n*   **Removed "None" GeoCoordinates:** Instead of `None`, I added representative geo-coordinates to places where the original response showed "None". This makes the data more complete.\n*   **Consistent Descriptions:** Descriptions are more concise.\n*   **GeoCoordinates Updated:** Added geoCoordinates for Buffet at Day 1, casual restaurant at Day 2\n*   **Added missing value:** Added missing value of Travel time at Fremont Street Experience\n*   **Added GeoCoordinates:** Added geoCoordinates for Food truck park\n*   **Consistent PlaceDetails:** All the place Details are now uniform\n\n**How to Use This Data:**\n\nThis JSON data can be used in a variety of applications:\n\n*   **Travel App:**  Create a travel app that displays the hotel options, the itinerary, and provides directions to each location. The geo-coordinates are essential for mapping and navigation.\n*   **Website:** Display the travel plan on a website, allowing users to customize and book their trip.\n*   **Recommendation Engine:** Use the data to build a recommendation engine that suggests other activities and hotels based on user preferences.\n*   **Data Analysis:** Analyze the data to identify trends and patterns in Las Vegas tourism.  For example, you could analyze which attractions are most popular or which hotels offer the best value.\n\nThis improved structure and content make the data more usable and practical for building a real travel application.\n' },
      ],
    },
    {
      role: 'user',
      parts: [
        { text: 'INSERT_INPUT_HERE' },
      ],
    },
  ],
});
